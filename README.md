# Monitor Large Files

Набор Perl-скриптов для мониторинга появления и роста больших файлов в каталогах.  
Подходит для сценариев, где необходимо контролировать заполнение дисков или сетевых хранилищ файлами большого размера.

## Скрипты

- **`monitor_large_newonly.pl`**  
  Отслеживает появление *новых* больших файлов и их рост.  
  Предназначен для простых локальных сценариев, где достаточно проверять новые объекты и не дублировать уведомления.

- **`monitor_large_anomaly.pl`**  
  Выявляет аномально «раздутые» каталоги и спускается внутрь только подозрительных папок.  
  Подходит для случаев, когда файлов очень много и нужен оптимизированный обход.

- **`monitor_large_nfs_find.pl`**  
  Упрощённая и NFS-дружелюбная версия.  
  Работает через `find`, не использует `du`, минимизирует нагрузку на сетевые шаринги.  
  Дополнительно может формировать отчёт о «жирных» каталогах по суммарному размеру файлов.

## Когда использовать какой скрипт

| Скрипт                     | Лучший сценарий применения                                                                  |
|-----------------------------|---------------------------------------------------------------------------------------------|
| `monitor_large_newonly.pl`  | Локальные диски, простая структура каталогов, нужно отслеживать только новые или растущие файлы |
| `monitor_large_anomaly.pl`  | Очень много файлов, требуется оптимизация: анализируются только папки с аномальным ростом      |
| `monitor_large_nfs_find.pl` | Сетевые шары (NFS/SMB), где `du` слишком медленный; минимальная нагрузка + отчёт о папках      |

## Возможности

- Поиск файлов, превышающих заданный порог (например, 2 ГБ)  
- Режим «только новые» и учёт роста уже известных файлов  
- Настраиваемые параметры: пороги размеров, глубина обхода, исключения  
- Отправка уведомлений по email через `sendmail`  
- Поддержка отчётов о крупных каталогах (для NFS-варианта)

## Использование

Скрипты запускаются из cron или вручную.  
Параметры (пути, лимиты, email-адреса) задаются внутри каждого скрипта.  

Пример для cron (каждые 5 минут):

```cron
*/5 * * * * /usr/bin/perl /usr/local/bin/monitor_large_newonly.pl
```

## Требования

Linux / Unix-подобная система.
Perl 5.x.
Доступный sendmail для отправки писем.
Утилита find (GNU findutils).
